{% extends 'base.html' %}

{% block title %} My profile {% endblock %}     

{% block body %} 
<style>
@import url(https://fonts.googleapis.com/css?family=Open+Sans:700,300);

html, body {
	width: 100%;
	height: 100%;
}

body {
	margin: 0;
	overflow: hidden;
	font-family: 'Open Sans', sans-serif;
	background-color: #f0f0f0;
}

.container {
	width: 640px;
	padding: 5px;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}

.stock {
	width: 150px;
	height: 150px;
	background-color: #CCC;
	position: relative;
	float: left;
	margin: 5px;
	transition: box-shadow 0.2s ease;
	&:hover {
		//box-shadow: inset 0 0 0 1000px rgba(255, 255, 255, 0.15);
	}
	.symbol, .change {
		position: absolute;
		left: 0;
		right: 0;
		text-align: center;
		color: #fff;
	}
	.symbol {
		top: 10px;
		text-transform: uppercase;
		font-size: 12px;
		font-weight: 300;
	}
	.change {
		top: 50%;
		font-size: 22px;
		font-weight: 700;
		transform: translateY(-50%);
	}

</style>
<div id="stock">
    <div class="container">
	
        <div class="stock" id="stock-1">
            <span class="symbol">AAPL</span>
            <span class="change">0.00%</span>
        </div>
    
        <div class="stock" id="stock-2">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
    
        <div class="stock" id="stock-3">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
        
        <div class="stock" id="stock-4">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
        
        <div class="stock" id="stock-5">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
        
        <div class="stock" id="stock-6">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
        
        <div class="stock" id="stock-7">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
        
        <div class="stock" id="stock-8">
            <span class="symbol">unknown</span>
            <span class="change">0.00%</span>
        </div>
        
    </div>
</div>

<script>
    $(document).ready(function() {
            
            var stocks = ['NVDA', 'EBAY', 'INTC', 'APPL', 'MSFT', 'GOOG', 'FB', 'TWTR'];
            var stocksUrl = stocks.join('%20');
                    
            var url = 'https://api.polygon.io/v1/meta/symbols/' + symbol + '/company?&apiKey=' + POLYAPI_KEY;
                                                
            $.getJSON(url, function(data) {			
                for (var i = 0; i < data.query.results.quote.length; i++) {
                    var stockId = '#stock-' + (i + 1);
                    var change = data.query.results.quote[i].ChangeinPercent;
        
                    if (change.slice(0,-1) < 0) {
                        $(stockId).css('background-color', '#db5959');
                    }  else if (change.slice(0,-1) > 0) {
                        $(stockId).css('background-color', '#68b665');
                    } else if (change.slice(0,-1) == 0) {
                        $(stockId).css('background-color', '#fdca41');
                    }
        
                    $(stockId).children('.symbol').html(data.query.results.quote[i].symbol);
                    $(stockId).children('.change').html(change);
                }
            });
        
        });
</script>


{% endblock %}